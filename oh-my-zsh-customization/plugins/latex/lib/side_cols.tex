
% A \greybox is a box with maximum width that has a grey background
% and slightly rounded corners.
%
\usepackage{tcolorbox}
\newcommand\greybox[1]{\begin{tcolorbox}[arc=1mm, colframe=white, colback=gray!30] #1 \end{tcolorbox}}

% A \sidebox is a \greybox in the side column.
%
\usepackage{marginnote}
\newcommand\sidebox[1]{\marginpar{\vspace{-1.5em}\greybox{\raggedright \setlength{\parskip}{0.5em} \footnotesize #1}}}

% To begin the layout with a side column, use \beginsidecollayout.
% To end it, use \normallayout.
%
\newcommand\beginsidecollayout{
  \newgeometry{outer=6cm, marginparwidth=4.5cm, marginparsep=0.5cm}

  % Notify \marginnote about the change.
  \edef\marginnotetextwidth{\the\textwidth}
}
\newcommand\normallayout{\clearpage\restoregeometry}

% To place images in the side column, ......
%
%\newenvironment\marginfigure{\marginpar}{}

% Footnotes in the margin.
%
%\newcounter{marginfootnote}
\newcommand{\marginfootnote}[1]{\refstepcounter{footnote}\mbox{\textsuperscript{\thefootnote}}
  \marginpar{\mbox{\textsuperscript{\thefootnote}}\hspace{0pt} \footnotesize \raggedright #1}
}

\newcommand\sideparagraph[1]{\vspace*{0.0em}\marginpar{\vspace*{2em}\textbf{\textsf #1}}}